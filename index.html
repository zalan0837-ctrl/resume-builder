<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>简历生成器 - 在线制作专业简历</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- 顶部工具栏 -->
  <header class="toolbar">
    <div class="toolbar-left">
      <h1 class="logo">📄 简历生成器</h1>
    </div>
    <div class="toolbar-right">
      <button id="btn-ai-settings" class="btn btn-secondary" title="配置 AI API Key">🤖 AI 设置</button>
      <button id="btn-reset" class="btn btn-secondary" title="清空所有内容">重置</button>
      <button id="btn-export" class="btn btn-primary" title="导出为Word文档">导出 Word</button>
    </div>
  </header>

  <!-- 主体区域：左侧编辑 + 右侧预览 -->
  <main class="main-container">
    <!-- 左侧编辑面板 -->
    <aside class="editor-panel">
      <div class="editor-header">
        <h2>编辑简历内容</h2>
        <p class="editor-tip">拖拽模块标题可调整顺序，内容自动保存</p>
      </div>

      <!-- 可拖拽排序的模块列表 -->
      <div id="module-list" class="module-list">

        <!-- 模块：个人信息（固定在最前面，不可拖拽） -->
        <div class="module" data-module="profile" data-fixed="true">
          <div class="module-header">
            <span class="module-title">👤 个人信息</span>
          </div>
          <div class="module-body">
            <div class="photo-upload-area">
              <label for="photo-input" class="photo-label">
                <div id="photo-preview" class="photo-preview">
                  <span class="photo-placeholder">点击上传照片</span>
                </div>
              </label>
              <input type="file" id="photo-input" accept="image/*" hidden>
              <button id="btn-remove-photo" class="btn-remove-photo" style="display:none;">移除照片</button>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>姓名 <span class="required">*</span></label>
                <input type="text" data-field="name" placeholder="请输入姓名">
              </div>
              <div class="form-group">
                <label>求职意向</label>
                <input type="text" data-field="jobTitle" placeholder="如：前端工程师">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>手机号</label>
                <input type="text" data-field="phone" placeholder="请输入手机号">
              </div>
              <div class="form-group">
                <label>邮箱</label>
                <input type="email" data-field="email" placeholder="请输入邮箱">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>所在城市</label>
                <input type="text" data-field="city" placeholder="如：北京">
              </div>
              <div class="form-group">
                <label>出生年月</label>
                <input type="text" data-field="birthday" placeholder="如：1995.06">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group full-width">
                <label>个人网站/作品集</label>
                <input type="text" data-field="website" placeholder="如：https://github.com/yourname">
              </div>
            </div>
          </div>
        </div>

        <!-- 模块：教育背景 -->
        <div class="module" data-module="education">
          <div class="module-header draggable-handle">
            <span class="drag-icon">⠿</span>
            <span class="module-title">🎓 教育背景</span>
            <div class="module-actions">
              <button class="btn-toggle-module" title="折叠/展开">▼</button>
              <button class="btn-delete-module" title="删除此模块">✕</button>
            </div>
          </div>
          <div class="module-body">
            <div class="item-list" data-items="education">
              <!-- 教育经历条目通过JS动态生成 -->
            </div>
            <button class="btn-add-item" data-add="education">+ 添加教育经历</button>
          </div>
        </div>

        <!-- 模块：工作经历 -->
        <div class="module" data-module="experience">
          <div class="module-header draggable-handle">
            <span class="drag-icon">⠿</span>
            <span class="module-title">💼 工作经历</span>
            <div class="module-actions">
              <button class="btn-toggle-module" title="折叠/展开">▼</button>
              <button class="btn-delete-module" title="删除此模块">✕</button>
            </div>
          </div>
          <div class="module-body">
            <div class="item-list" data-items="experience">
            </div>
            <button class="btn-add-item" data-add="experience">+ 添加工作经历</button>
          </div>
        </div>

        <!-- 模块：项目经历 -->
        <div class="module" data-module="projects">
          <div class="module-header draggable-handle">
            <span class="drag-icon">⠿</span>
            <span class="module-title">🚀 项目经历</span>
            <div class="module-actions">
              <button class="btn-toggle-module" title="折叠/展开">▼</button>
              <button class="btn-delete-module" title="删除此模块">✕</button>
            </div>
          </div>
          <div class="module-body">
            <div class="item-list" data-items="projects">
            </div>
            <button class="btn-add-item" data-add="projects">+ 添加项目经历</button>
          </div>
        </div>

        <!-- 模块：专业技能 -->
        <div class="module" data-module="skills">
          <div class="module-header draggable-handle">
            <span class="drag-icon">⠿</span>
            <span class="module-title">🛠 专业技能</span>
            <div class="module-actions">
              <button class="btn-toggle-module" title="折叠/展开">▼</button>
              <button class="btn-delete-module" title="删除此模块">✕</button>
            </div>
          </div>
          <div class="module-body">
            <div class="form-group full-width textarea-with-ai">
              <label>技能描述</label>
              <textarea data-field="skillsContent" rows="5" placeholder="请描述您的专业技能，如：&#10;• 熟练掌握 HTML/CSS/JavaScript&#10;• 熟悉 React、Vue 等前端框架&#10;• 了解 Node.js 后端开发"></textarea>
              <button class="btn-ai-optimize" data-ai-target="skillsContent" data-ai-context="专业技能" title="AI 优化">✨ AI 优化</button>
            </div>
          </div>
        </div>

        <!-- 模块：自我评价 -->
        <div class="module" data-module="summary">
          <div class="module-header draggable-handle">
            <span class="drag-icon">⠿</span>
            <span class="module-title">✨ 自我评价</span>
            <div class="module-actions">
              <button class="btn-toggle-module" title="折叠/展开">▼</button>
              <button class="btn-delete-module" title="删除此模块">✕</button>
            </div>
          </div>
          <div class="module-body">
            <div class="form-group full-width textarea-with-ai">
              <label>自我评价</label>
              <textarea data-field="summaryContent" rows="4" placeholder="简要描述您的优势和特点"></textarea>
              <button class="btn-ai-optimize" data-ai-target="summaryContent" data-ai-context="自我评价" title="AI 优化">✨ AI 优化</button>
            </div>
          </div>
        </div>

        <!-- 模块：荣誉证书 -->
        <div class="module" data-module="awards">
          <div class="module-header draggable-handle">
            <span class="drag-icon">⠿</span>
            <span class="module-title">🏆 荣誉证书</span>
            <div class="module-actions">
              <button class="btn-toggle-module" title="折叠/展开">▼</button>
              <button class="btn-delete-module" title="删除此模块">✕</button>
            </div>
          </div>
          <div class="module-body">
            <div class="form-group full-width textarea-with-ai">
              <label>荣誉与证书</label>
              <textarea data-field="awardsContent" rows="4" placeholder="如：&#10;• 2023年 优秀员工&#10;• CET-6 英语六级证书&#10;• PMP 项目管理认证"></textarea>
              <button class="btn-ai-optimize" data-ai-target="awardsContent" data-ai-context="荣誉证书" title="AI 优化">✨ AI 优化</button>
            </div>
          </div>
        </div>

      </div>

      <!-- 恢复已删除模块 -->
      <div id="deleted-modules" class="deleted-modules" style="display:none;">
        <h3>已删除的模块（点击恢复）</h3>
        <div id="deleted-modules-list" class="deleted-modules-list"></div>
      </div>
    </aside>

    <!-- 右侧预览面板 -->
    <section class="preview-panel">
      <div class="preview-header">
        <h2>简历预览</h2>
      </div>
      <div class="preview-wrapper">
        <div id="resume-preview" class="resume-preview">
          <!-- 预览内容通过JS动态生成 -->
          <div class="resume-empty-tip">
            <p>👈 请在左侧填写简历内容</p>
            <p>右侧将实时显示简历效果</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- 保存提示 -->
  <div id="save-toast" class="save-toast">✓ 已自动保存</div>

  <!-- AI 设置弹窗 -->
  <div id="ai-settings-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>🤖 AI 设置</h3>
        <button class="modal-close" id="btn-close-ai-settings">✕</button>
      </div>
      <div class="modal-body">
        <p class="modal-tip">配置 AI API 以启用"AI 优化"功能。支持任何兼容 OpenAI 格式的 API。</p>
        <div class="form-group full-width">
          <label>API 地址（Base URL）</label>
          <input type="text" id="ai-base-url" placeholder="如：https://api.openai.com/v1">
        </div>
        <div class="form-group full-width" style="margin-top:12px;">
          <label>API Key</label>
          <input type="password" id="ai-api-key" placeholder="请输入你的 API Key">
        </div>
        <div class="form-group full-width" style="margin-top:12px;">
          <label>模型名称</label>
          <input type="text" id="ai-model" placeholder="如：gpt-3.5-turbo">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="btn-cancel-ai-settings">取消</button>
        <button class="btn btn-primary" id="btn-save-ai-settings">保存设置</button>
      </div>
    </div>
  </div>

  <!-- AI 优化结果弹窗 -->
  <div id="ai-result-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content modal-content-lg">
      <div class="modal-header">
        <h3>✨ AI 优化结果</h3>
        <button class="modal-close" id="btn-close-ai-result">✕</button>
      </div>
      <div class="modal-body">
        <div id="ai-loading" class="ai-loading" style="display:none;">
          <div class="ai-spinner"></div>
          <p>AI 正在优化中，请稍候...</p>
        </div>
        <div id="ai-result-content" style="display:none;">
          <label class="ai-result-label">原始内容：</label>
          <div id="ai-original-text" class="ai-text-box"></div>
          <label class="ai-result-label" style="margin-top:12px;">优化后内容：</label>
          <textarea id="ai-optimized-text" class="ai-text-box ai-optimized-box" rows="6"></textarea>
        </div>
        <div id="ai-error" class="ai-error" style="display:none;"></div>
      </div>
      <div class="modal-footer" id="ai-result-footer" style="display:none;">
        <button class="btn btn-secondary" id="btn-discard-ai">放弃</button>
        <button class="btn btn-primary" id="btn-apply-ai">采用优化结果</button>
      </div>
    </div>
  </div>

  <!-- 引入 Sortable.js 用于拖拽排序 -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.3/Sortable.min.js"></script>
  <!-- 引入 docx 库用于导出 Word 文件 -->
  <script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.umd.js"></script>
  <!-- 引入 FileSaver 用于保存文件 -->
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
